<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>微信公众号以及智能聊天机器人的接入 | Kosmgco</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="category" value="python">
    <meta name="date" value="2016-03-04 20:35:34">
    <meta name="title" value="微信公众号以及智能聊天机器人的接入">
    <meta name="tags" value="微信,网络api">
    <meta name="reader" value="markdown">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="wb:webmaster" content="ba29596b8c7c7ae7" /> 

    <meta name="description" content="Linux. Python. Coder. Gopher.">
    <meta name="author" content="kosmgco">

    <link href="/theme/css/fonts.css" rel="stylesheet" />

    <link href="/theme/css/normalize.css" rel="stylesheet"/>
    <link href="/theme/css/skeleton.css" rel="stylesheet"/>
    <link href="/theme/css/github-prettify-theme.css" rel="stylesheet"/>
    <link href="/theme/css/custom.css" rel="stylesheet"/>
    <link href="/theme/css/pygments.css" rel="stylesheet"/>

    <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/run_prettify.js"></script>
    <script src="/theme/js/site.js"></script>
</head>
<body class="code-snippets-visible">

<div class="navbar-spacer"></div>
<nav class="navbar">
    <div class="container">
        <ul class="navbar-list">
            <li class="navbar-item">
                <a class="navbar-link" href="/">
                    HOME
                </a>
            </li>
                <li class="navbar-item">
                    <a class="navbar-link" href="/pages/wiki.html">
                        wiki
                    </a>
                </li>
                <li class="navbar-item">
                    <a class="navbar-link" href="/pages/about.html">
                        about
                    </a>
                </li>
                <li class="navbar-item">
                    <a class="navbar-link" href="/pages/blog.html">
                        blog
                    </a>
                </li>
                <li class="navbar-item">
                    <a class="navbar-link" href="/pages/theme.html">
                        theme
                    </a>
                </li>
                <li class="navbar-item">
                    <a class="navbar-link" href="/pages/books.html">
                        books
                    </a>
                </li>
        </ul>
        <div class="navbar-link">
            <a href="/"><img src="/theme/images/header.jpg" class="site-icon"/></a>
        </div>
    </div>
</nav>
<div class="container">
    <section id="content">
        <article>
            <p class="article-date">
                全文总字数: 444
            </p>
            <header class="article-header">
                <a href="/wei-xin-gong-zhong-hao-yi-ji-zhi-neng-liao-tian-ji-qi-ren-de-jie-ru.html" rel="bookmark" title="Permalink to 微信公众号以及智能聊天机器人的接入">
                    <h3 class="blogpost-title">
                        微信公众号以及智能聊天机器人的接入
                    </h3>
                </a>
            </header>
            <div>
                <p>很早就开通了微信个人公众号，本意是想让微信公众号代替邮箱短信等方式来发一些推送，毕竟微信比邮箱推送来的快多了，我看到的比较及时，响应的也会比较快。但是微信个人公众号每天只能发一条群发消息，满足不了我的需求，放弃之。</p>
<p>今天突然看到有关微信公众号开发的一些东西，进去看了一下，发现我还没进行开发者认证。</p>
<p>认证过程如下：
- 登陆微信公众平台
- 点击侧边栏的基本配置
- 点击右侧的修改配置按钮
- 填写地址等信息
- 验证</p>
<p><img alt="enter image description here" src="http://7xp11h.com1.z0.glb.clouddn.com/serverconfig.jpg"></p>
<p>token验证服务端代码:</p>
<div class="highlight"><pre><span></span><span class="c1"># flask</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/wechat&#39;</span><span class="p">,</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">wechat</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    验证token</span>
<span class="sd">    1.微信会给服务端发送一个随机字符串echostr</span>
<span class="sd">    2.微信要求服务端将随机字符串原样返回以完成开发者认证</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;echostr&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># 微信公众平台只允许80或者443端口</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>


<p>验证通过后，在服务器上写上业务代码就能完成相应的业务了。</p>
<p>今天我是对接了一个智能聊天机器人，也试过几个机器人</p>
<ul>
<li>
<p>1.<a href="http://e.msxiaobing.com/login.aspx">微软小冰</a>
有相应的服务可用，不用写代码，也许不用开发者认证</p>
</li>
<li>
<p>2.<a href="http://www.xiaodoubi.com/simsimiapi.php?msg=你好">小黄鸡api</a>
也许是太久没维护了，什么都不会</p>
</li>
<li>
<p>3.<a href="http://api.qingyunke.com/">青云客</a>
感觉还不错，支持的功能也挺多的，天气，翻译，藏头诗。。。</p>
</li>
</ul>
<p><center><strong>欢迎调戏</strong></p>
<p><img alt="微信公众号" src="http://7xp11h.com1.z0.glb.clouddn.com/qrcode_for_gh_89134c191433_430.jpg">
</center></p>
            </div>
            <div class="article-info">
                <hr/>
                <div class="article-info">
                    <span><b>Category: </b><a href="/category/python.html">python</a></span>
                    <br/>
                    <span><b>Publication Date: </b> Fri 04 March 2016 </span>
                    <br/>
                        <a class="label-default" href="/tag/wei-xin.html">微信</a>
                        <a class="label-default" href="/tag/wang-luo-api.html">网络api</a>
                    <br/>
                </div>
            </div>
        </article>
    </section>
    <br/>
    <br/>
    <br/>
</div>

<footer class="footer">
    &copy <a href="/" >kosmgco</a>. 2016
    <br/>
    Powered by <a href="//getpelican.com/">pelican</a>.
    Theme by <a href="//github.com/kosmgco/ops">ops</a> | 
    <a href="//www.miitbeian.gov.cn/">渝ICP备16003403号</a>
</footer>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?67d2b3355046511d3ad9eef9c65d2a41";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>